<%- include("../layout/header", { title: "Dashboard" }) %>

<section class="container my-5">
  <%- include("../layout/messages") %>


  <div class="d-flex justify-content-between align-items-center mb-4">
    <a href="/admin/add" class="btn btn-success">Add Project</a>
  </div>

  <div class="row">
    <% if (projects && projects.length > 0) { %>
      <% projects.forEach(function(project){ %>
        <div class="col-md-4 mb-4 project-item">
          <div class="card shadow-sm h-100">
            <img src="<%= project.image %>" class="card-img-top" style="height:200px; object-fit:cover;" alt="<%= project.title %>">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title"><%= project.title %></h5>
              <p class="card-text"><%= project.description.length > 120 ? project.description.substring(0,120) + "..." : project.description %></p>
              <% if(project.category){ %>
                <span class="badge bg-secondary"><%= project.category %></span>
              <% } %>
              <p class="mb-2"><small>Tech: <%= project.tech.join(", ") %></small></p>

              <div class="mt-auto d-flex flex-wrap gap-2">
                <a href="/admin/edit/<%= project._id %>" class="btn btn-warning btn-sm">Edit</a>
                <form action="/admin/delete/<%= project._id %>" method="POST" style="display:inline;">
                  <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this project?');">Delete</button>
                </form>
              </div>

            </div>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <p class="text-center">No projects found.</p>
    <% } %>
  </div>
</section>


<%- include("../layout/footer") %>
